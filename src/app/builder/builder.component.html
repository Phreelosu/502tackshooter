<div class="container">
  <div class="row">
    <div class="col">
      <h3 class="text-center">Choose your parts</h3>
      <div class="row">
        <div class="col">
          <ul class="list-group">

            <li class="list-group-item">
              <label for="processor">Processor</label>
              <select id="processor" class="form-select" [(ngModel)]="selectedProcessor" [disabled]="!isLoggedIn()" (change)="updateProcessorDetails(selectedProcessor)">
                  <option [ngValue]="null" disabled>Choose a Processor</option>
                  <option *ngFor="let processor of processors" [value]="processor.id">{{ processor.CPU_name }}</option>
              </select>  
              <div *ngIf="selectedProcessor" class="details">
                <h4>Processor Details</h4>
                <ul class="list-unstyled">
                    <li><strong>Price:</strong> ${{ processorDetails?.CPU_price }}</li>
                    <li><strong>Core Count:</strong> {{ processorDetails?.CPU_core_count }}</li>
                    <li><strong>Core Clock:</strong> {{ processorDetails?.CPU_core_clock }} GHz</li>
                    <li><strong>Boost Clock:</strong> {{ processorDetails?.CPU_boost_clock }} GHz</li>
                    <li><strong>Graphics:</strong> {{ processorDetails?.CPU_graphics }}</li>
                </ul>
            </div>
            </li>
          
            <li class="list-group-item">
              <label for="cooler">Cooler</label>
              <select id="cooler" class="form-select" [(ngModel)]="selectedProcessorCooler" [disabled]="!isLoggedIn()" (change)="updateCoolerDetails(selectedProcessorCooler)">
                  <option [ngValue]="null" disabled>Choose a Cooler</option>
                  <option *ngFor="let cooler of processorCoolers" [value]="cooler.id">{{ cooler.Cooler_name }}</option>
              </select>
              <div *ngIf="coolerDetails" class="details">
                  <h4>Cooler Details</h4>
                  <ul class="list-unstyled">
                      <li><strong>Price:</strong> ${{ coolerDetails.Cooler_price }}</li>
                      <li><strong>Cooler Minimum RPM:</strong> {{ coolerDetails.Cooler_RPM_Min }}</li>
                      <li><strong>Cooler Maximum RPM:</strong> {{ coolerDetails.Cooler_RPM_Max }}</li>
                      <li><strong>Color:</strong> {{ coolerDetails.Cooler_color_name }}</li> <!-- Check this line -->
                  </ul>
              </div>
          </li>
                         

            <li class="list-group-item">
              <label for="memory">Memory</label>
              <select id="memory" class="form-select" [(ngModel)]="selectedMemory" (ngModelChange)="updateMemoryDetails(selectedMemory)" [disabled]="!isLoggedIn()">
                <option [ngValue]="null" disabled selected>Choose a Memory</option>
                <option *ngFor="let memory of memories" [value]="memory.id">{{ memory.Memory_name }}</option>
            </select>            
            <div *ngIf="selectedMemory" class="details">
              <h4>Memory Details</h4>
              <ul class="list-unstyled">
                <li><strong>Price:</strong> ${{ memoryDetails?.Memory_price }}</li>
                <li><strong>Memory Speed:</strong> {{ memoryDetails?.Memory_speed }}</li>
                <li><strong>Color:</strong> {{ memoryDetails?.Memory_color_name }}</li> 
                <li><strong>First word latency:</strong> {{ memoryDetails?.First_word_latency }}</li>
                <li><strong>CAS latency:</strong> {{ memoryDetails?.CAS_latency }}</li>
            </ul>
          </div>
            </li>

            <li class="list-group-item">
              <label for="motherboard">Motherboard</label>
              <select id="motherboard" class="form-select" [(ngModel)]="selectedMotherboard" [disabled]="!isLoggedIn()">
                <option [ngValue]="null" disabled selected>Choose a Motherboard</option>
                <option *ngFor="let motherboard of motherboards" [value]="motherboard.id">{{ motherboard.Motherboard_name }}</option>
            </select>              
            </li>

            <li class="list-group-item">
              <label for="gpu">Graphics Card</label>
              <select id="gpu" class="form-select" [(ngModel)]="selectedGraphicsCard" [disabled]="!isLoggedIn()">
                <option [ngValue]="null" disabled selected>Choose a Graphics Card</option>
                <option *ngFor="let gpu of graphicsCards" [value]="gpu.id">{{ gpu.GPU_name }} {{gpu.GPU_chipset}}</option>
            </select> 
            </li>

            <li class="list-group-item">
              <label for="ihd">Hard Drive / Storage</label>
              <select id="ihd" class="form-select" [(ngModel)]="selectedhardDrive" [disabled]="!isLoggedIn()">
                <option [ngValue]="null" disabled selected>Choose a Hard Drive</option>
                <option *ngFor="let internal_hard_drive of hardDrives" [value]="internal_hard_drive.id">{{ internal_hard_drive.Hard_drive_name }}</option>
            </select>
            </li>

            <li class="list-group-item">
              <label for="psu">Power Supply</label>
              <select id="psu" class="form-select" [(ngModel)]="selectedPowerSupply" [disabled]="!isLoggedIn()">
                <option [ngValue]="null" disabled selected>Choose a PSU</option>
                <option *ngFor="let psu of powerSupplies" [value]="psu.id">{{ psu.PSU_name }}</option>
            </select> 
            </li>

            <li class="list-group-item">
              <label for="case">Case</label>
              <select id="case" class="form-select" [(ngModel)]="selectedCase" [disabled]="!isLoggedIn()">
                <option [ngValue]="null" disabled selected>Choose a Case</option>
                <option *ngFor="let pc_case of cases" [value]="pc_case.id">{{ pc_case.Case_name }}</option>
            </select>
            </li>
          </ul>
        </div>
        
        <!-- Display success message if exists -->
        <div *ngIf="successMessage" class="alert alert-success">
            {{ successMessage }}
        </div>

        <!-- Display error message if exists -->
        <div *ngIf="errorMessage" class="alert alert-danger">
            {{ errorMessage }}
        </div>

        <button class="btn btn-primary mt-3" (click)="isLoggedIn() ? saveConfiguration() : redirectToLogin()">
          {{ isLoggedIn() ? 'Save Configuration' : 'Log in to save your configuration!' }}
        </button>                  
      </div>
    </div>
  </div>
</div>



